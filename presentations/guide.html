<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta content='A framework for easily creating beautiful presentations using HTML' name='description'>
    <title>
      Geekcamp Baguio 2013 -
      Guide
    </title>
    <meta content='Hakim El Hattab' name='author'>
    <meta content='yes' name='apple-mobile-web-app-capable'>
    <meta content='black-translucent' name='apple-mobile-web-app-status-bar-style'>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' name='viewport'>
    <link href='/vendor/reveal.js-2.4.0/css/reveal.min.css' rel='stylesheet'>
    <link href='/vendor/reveal.js-2.4.0/css/theme/default.css' id='theme' rel='stylesheet'>
    <link href='/stylesheets/presentations.css' id='theme' rel='stylesheet'>
    <!-- For syntax highlighting -->
    <link href='/vendor/reveal.js-2.4.0/lib/css/zenburn.css' rel='stylesheet'>
    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="/vendor/reveal.js-2.4.0/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
      
      document.write( '<link rel="stylesheet" href="/stylesheets/presentations/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>
    <!--[if lt IE 9]>
      <script src="/vendor/reveal.js-2.4.0/lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class='reveal'>
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class='slides'>
        <section>
          <h2>Lessons</h2>
          <ol>
            <li>
              <p><a href="/presentations/10-installing-and-running-rails">Installing and Running Rails</a></p>
            </li>
            <li>
              <p><a href="/presentations/20-database-crud">Database CRUD</a></p>
            </li>
            <li>
              <p><a href="/presentations/30-show">Show Itinerary Page</a></p>
            </li>
            <li>
              <p><a href="/presentations/40-index-page">List Itineraries Page</a></p>
            </li>
            <li>
              <p><a href="/presentations/50-create">Create Itinerary Page</a></p>
            </li>
            <li>
              <p><a href="/presentations/60-update">Update Itinerary Page</a></p>
            </li>
            <li>
              <p><a href="/presentations/70-delete">Delete Itinerary Page</a></p>
            </li>
            <li>
              <p><a href="/presentations/80-validate">Validate Itinerary</a></p>
            </li>
          </ol>
        </section>
        <section>
          <h2>Speakers</h2>
          <ul>
            <li>
              <p><a href="/presentations/0-gsmendoza-introduction">George Mendoza</a></p>
            </li>
          </ul>
        </section>
        <section>
          <h2>Guide</h2>
          <ul>
            <li>
              <p><a href="/presentations/guide">Guide</a></p>
            </li>
          </ul>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Installing and Running Rails</h1>
        </section>
        <section class='section-logo'>
          <div class='image-group'>
            <p><img src="/images/rails.png" alt="Rails logo">
            <img src="/images/rails-overview.gif" alt="Rails overview"></p>
          </div>
          <ul>
          <li>Created in 2003 by David Heinemeier Hansson.</li>
          <li>Some popular examples of websites using Rails are
          <a href="http://www.basecamphq.com/?source=rails">BaseCamp</a>,
          <a href="http://www.twitter.com/">Twitter</a> and
          <a href="github.com">GitHub</a>.</li>
          <li>Convention over configuration = less code</li>
          <li>Written in the Ruby programming language<br></li>
          </ul>
        </section>
        <section class='section-logo'>
          <div class='image-group'>
            <p><img src="/images/ruby-logo.gif" alt="Ruby"></p>
          </div>
          <ul>
          <li><p>A dynamic, open source programming language with a focus on simplicity and
          productivity. It has an elegant syntax that is natural to read and easy to
          write.</p></li>
          <li><p>Created by Yukihiro Matsumoto.</p></li>
          </ul>
        </section>
        <section>
          <h2>&quot;Error driven development&quot;</h2>
          
          <p>Borrowed from Test-Driven Development:</p>
          
          <ol>
          <li>Watch it fail.</li>
          <li>Fix it with minimum solution.</li>
          <li>Clean it up.</li>
          </ol>
        </section>
        <section>
          <h2>Exercise 1: Installing and running Rails</h2>
        </section>
        <section>
          <h2>Goal</h2>
          
          <ul>
          <li><strong>browser</strong>: http://localhost:3000</li>
          <li><strong>error</strong>: Internet Explorer cannot display the webpage</li>
          </ul>
        </section>
        <section>
          <h2>Step 1: Rails installer</h2>
          
          <p>On Windows, download Rails installer (Ruby 1.9) from <a href="http://%0Arailsinstaller.org">http://
          railsinstaller.org</a> and install. You will be asked to enter your name
          and email.</p>
        </section>
        <section>
          <h2>Step 2: Create Rails application</h2>
          
          <pre><code>cmd &gt; rails new trips-app&#x000A;cmd &gt; cd trips-app&#x000A;cmd &gt; rails server&#x000A;</code></pre>
          <aside class='notes'>
            <ul>
            <li><code>bundle install</code> may take awhile to finish.</li>
            <li>You may have to
            
            <ul>
            <li>make Windows firewall allow Ruby to access private network.</li>
            <li>turn intranet settings in IE9.</li>
            </ul></li>
            </ul>
          </aside>
        </section>
        <section>
          <h2>Result</h2>
          
          <p><img src="/images/riding_rails_environment_4_0.png" alt="Welcome aboard: You’re riding Ruby on Rails!&quot;"></p>
        </section>
        <section>
          <h2>What&#39;s happening?</h2>
          
          <p><img src="/images/webserver-basic-sm.gif" alt="Webserver"></p>
          
          <pre><code>Started GET &quot;/&quot; for 127.0.0.1 at 2013-08-07 18:03:44 +0800&#x000A;Processing by Rails::WelcomeController#index as HTML&#x000A;  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-4.0.0.rc2/lib/rails/templates/rails/welcome/index.html.erb (0.0ms)&#x000A;Completed 200 OK in 13ms (Views: 0.0ms | ActiveRecord: 0.0ms)&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 2: Closing Rails</h2>
          
          <h3>Action</h3>
          
          <pre><code>cmd &gt; Press Ctrl-C then `Y` to terminate batch job.&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <p>If you refresh the browser, http://localhost:3000 should now display &quot;Internet Explorer cannot display the webpage&quot;</p>
        </section>
        <section>
          <h2>References and Images</h2>
          
          <ul>
          <li>http://computer.howstuffworks.com/web-server1.htm</li>
          <li>http://rubyonrails.org</li>
          <li>http://ruby.railstutorial.org</li>
          <li>http://www.ruby-lang.org/en</li>
          </ul>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Database CRUD</h1>
        </section>
        <section>
          <h2>Exercise 1: List itineraries</h2>
        </section>
        <section>
          <h2>Goal</h2>
          
          <pre><code>cmd &gt; rails console&#x000A;irb &gt; Itinerary.all&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>NameError: uninitialized constant Itinerary&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 0: Install and configure Geany</h2>
          
          <ul>
          <li><p>Download from <a href="geany.org">geany.org</a> and install</p></li>
          <li><p>Configure Geany:</p>
          
          <pre><code>Preferences&#x000A;  Editor&#x000A;    Indentation&#x000A;      Width: 2&#x000A;      Type: Spaces&#x000A;</code></pre></li>
          </ul>
        </section>
        <section>
          <h2>Step 1: Create Itinerary class</h2>
          
          <pre><code># app/models/itinerary.rb&#x000A;class Itinerary&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>irb &gt; Itinerary.all&#x000A;=&gt; NoMethodError: undefined method `all&#39; for Itinerary:Class &#x000A;</code></pre>
          
          <ul>
          <li>A class is a type of object.</li>
          <li>Convention over configuration: case matters.</li>
          </ul>
        </section>
        <section>
          <h2>Step 2: Make Itinerary an ActiveRecord</h2>
          
          <pre><code>    # app/models/itinerary.rb&#x000A;    class Itinerary &lt; ActiveRecord::Base&#x000A;    end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>irb &gt; Itinerary.all&#x000A;=&gt; NoMethodError: undefined method `all&#39; for Itinerary:Class &#x000A;</code></pre>
          
          <ul>
          <li>ActiveRecord is a ruby gem (library) used to managing database records</li>
          </ul>
        </section>
        <section>
          <h2>Step 3: Reload the rails console</h2>
          
          <pre><code>irb &gt; reload!&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>Reloading...&#x000A;=&gt; true&#x000A;&#x000A;irb &gt; Itinerary.all&#x000A;[1m←[35mItinerary Load (0.0ms)←[0m  SELECT &quot;itineraries&quot;.* FROM &quot;itineraries&quot;&#x000A;SQLite3::SQLException: no such table: itineraries: SELECT &quot;itineraries&quot;.* FROM &quot;itineraries&quot;&#x000A;ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: itineraries: SELECT &quot;itineraries&quot;.* FROM &quot;itineraries&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4. Create a database table itineraries.</h2>
          
          <pre><code>cmd &gt; rails generate migration create_itineraries &#x000A;&#x000A;# /db/migrations/2013_****_create_itineraries.rb &#x000A;class CreateItineraries &lt; ActiveRecord::Migration&#x000A;  def change&#x000A;    create_table :itineraries do |t|&#x000A;      t.string &quot;location&quot;&#x000A;      t.date &quot;travel_on&quot;&#x000A;    end&#x000A;  end&#x000A;end&#x000A;&#x000A;cmd &gt; rake db:migrate&#x000A;</code></pre>
          
          <ul>
          <li>Migration is a transaction to update our database</li>
          <li>Database is like an enhanced spreadsheet</li>
          <li>Two kinds of rails commands: rails <command> and rake <command></li>
          </ul>
        </section>
        <section>
          <h2>Result</h2>
          
          <pre><code>irb &gt; Itinerary.all&#x000A;=&gt; ←[1m←[36mItinerary Load (7.8ms)←[0m  ←[1mSELECT &quot;itineraries&quot;.* FROM &quot;itineraries&quot;←[0m&#x000A;=&gt; #&lt;ActiveRecord::Relation []&gt;    &#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 2: Create an itinerary</h2>
          
          <pre><code>irb &gt; itinerary = Itinerary.new&#x000A;=&gt; #&lt;Itinerary id: nil, location: nil, travel_on: nil&gt;&#x000A;&#x000A;irb &gt; itinerary.location = &#39;Baguio&#39;&#x000A;irb &gt; itinerary.travel_on = Date.new(2013, 12, 25) &#x000A;irb &gt; itinerary.save&#x000A;</code></pre>
          
          <ul>
          <li>Variable assignment</li>
          </ul>
        </section>
        <section>
          <h2>Exercise 3: Find a specific itinerary</h2>
          
          <pre><code>irb &gt; Itinerary.find(1)&#x000A;=&gt; #&lt;Itinerary id: 1, location: &quot;Baguio&quot;, travel_on: &quot;2013-12-25&quot;&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 4: Edit an itinerary</h2>
          
          <pre><code>irb &gt; itinerary = Itinerary.find(1)&#x000A;irb &gt; itinerary.location&#x000A;=&gt; &quot;Baguio&quot;&#x000A;&#x000A;irb &gt; itinerary = Itinerary.find(1)&#x000A;irb &gt; itinerary.location = &#39;Manila&#39;&#x000A;irb &gt; itinerary.save&#x000A;&#x000A;irb &gt; itinerary = Itinerary.find(1)&#x000A;irb &gt; itinerary.location&#x000A;=&gt; &quot;Manila&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 5: Delete an itinerary</h2>
          
          <pre><code>irb &gt; itinerary = Itinerary.find(1)&#x000A;=&gt; #&lt;Itinerary id: 1, location: &quot;Baguio&quot;, travel_on: &quot;2013-12-25&quot;&gt;&#x000A;&#x000A;irb &gt; itinerary.destroy&#x000A;&#x000A;irb &gt; Itinerary.find(1)&#x000A;=&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find Itinerary with id=1    &#x000A;</code></pre>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Show Itinerary Page</h1>
        </section>
        <section>
          <h2>Step 0: Have at least one itinerary</h2>
          
          <ul>
          <li>Create another itinerary in rails console.</li>
          <li>In the following slides, we assume that there&#39;s an itinerary with id 2.</li>
          </ul>
        </section>
        <section>
          <h2>Goal</h2>
          
          <pre><code>browser &gt; http://localhost:3000/itineraries/2&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt; No route matches [GET] &quot;/itineraries/2&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: Add the itineraries route</h2>
          
          <pre><code># config/routes&#x000A;TripsApp::Application.routes.draw do&#x000A;  resources :itineraries&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt; uninitialized constant ItinerariesController&#x000A;</code></pre>
          <aside class='notes'>
            <p>You can delete all the ruby comments.</p>
          </aside>
        </section>
        <section>
          <h2>Step 2: Add itineraries controller</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Unknown action: The action &#39;show&#39; could not be found for ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: Add show action to ItinerariesController</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def show&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/show, application/show with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4: Add itineraries/show template</h2>
          
          <pre><code># app/views/itineraries/show.html.erb&#x000A;&lt;%= debug Itinery.find(params[:id]) %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  --- !ruby/object:Itinerary&#x000A;  attributes:&#x000A;    id: 2&#x000A;    location: Baguio&#x000A;    travel_on: 2013-08-12&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 5: Prettify Show Itinerary page</h2>
          
          <pre><code># app/views/itineraries/show.html.erb&#x000A;&lt;% itinerary = Itinerary.find(params[:id]) %&gt;&#x000A;&#x000A;&lt;h1&gt;Itinerary &lt;%= itinerary.id %&gt;&lt;/h1&gt;&#x000A;&#x000A;&lt;ul&gt;&#x000A;  &lt;li&gt;Location: &lt;%= itinerary.location %&gt;&lt;/li&gt;&#x000A;  &lt;li&gt;Travel Date: &lt;%= itinerary.travel_on %&gt;&lt;/li&gt;&#x000A;&lt;/ul&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 6.1: Clean up: do not interact with database directly in views</h2>
          
          <pre><code># app/views/itineraries/show.html.erb&#x000A;&lt;h1&gt;Itinerary &lt;%= @itinerary.id %&gt;&lt;/h1&gt;&#x000A;&#x000A;&lt;ul&gt;&#x000A;  &lt;li&gt;Location: &lt;%= @itinerary.location %&gt;&lt;/li&gt;&#x000A;  &lt;li&gt;Travel Date: &lt;%= @itinerary.travel_on %&gt;&lt;/li&gt;&#x000A;&lt;/ul&gt;&#x000A;</code></pre>
          
          <h2>Result</h2>
          
          <pre><code>browser =&gt;&#x000A;  Showing C:/Users/George Mendoza/trips-app/app/views/itineraries/show.html.erb&#x000A;  where line #1 raised:&#x000A;  undefined method `id&#39; for nil:NilClass&#x000A;  Line 1: &lt;h1&gt;Itinerary &lt;%= @itinerary.id %&gt;&lt;/h1&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 6.2: Clean up: make controller set up @itinerary</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def show&#x000A;    @itinerary = Itinerary.find(params[:id])&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 7: Test another itinerary</h2>
          
          <ul>
          <li>Create another itinerary in rails console.</li>
          <li>View the itinerary from the website.</li>
          </ul>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>List Itineraries Page</h1>
        </section>
        <section>
          <h2>Step 0: Have at least one itinerary</h2>
          
          <ul>
          <li>Create several itineraries in rails console.</li>
          </ul>
        </section>
        <section>
          <h2>Goal</h2>
          
          <pre><code>browser &gt; http://localhost:3000/itineraries&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Unknown action&#x000A;  The action &#39;index&#39; could not be found for ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: Add index action to ItinerariesController</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def index&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/index, application/index with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: Add itineraries/index template</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;%= debug Itinerary.all %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  ---&#x000A;  - !ruby/object:Itinerary&#x000A;    attributes:&#x000A;      id: 1&#x000A;      location: Baguio&#x000A;      travel_on: 2013-08-12&#x000A;  - !ruby/object:Itinerary&#x000A;    attributes:&#x000A;      id: 2&#x000A;      location: Manila&#x000A;      travel_on: 2013-08-13&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: Prettify List Itineraries page</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;% itineraries = Itinerary.all %&gt;&#x000A;&#x000A;&lt;h1&gt;Itineraries&lt;/h1&gt;&#x000A;&#x000A;&lt;table&gt;&#x000A;  &lt;tr&gt;&#x000A;    &lt;th&gt;Location&lt;/th&gt;&#x000A;    &lt;th&gt;Travel Date&lt;/th&gt;&#x000A;  &lt;/tr&gt;&#x000A;&lt;% itineraries.each do |itinerary| %&gt;&#x000A;  &lt;tr&gt;&#x000A;    &lt;td&gt;&lt;%= itinerary.location %&gt;&lt;/td&gt;&#x000A;    &lt;td&gt;&lt;%= itinerary.travel_on %&gt;&lt;/td&gt;&#x000A;  &lt;tr&gt;&#x000A;&lt;% end %&gt;&#x000A;&lt;/table&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4.1: Clean up: do not interact with database directly in views</h2>
          <div class='smaller'>
            <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;h1&gt;Itineraries&lt;/h1&gt;&#x000A;&#x000A;&lt;table&gt;&#x000A;  &lt;tr&gt;&#x000A;    &lt;th&gt;Location&lt;/th&gt;&#x000A;    &lt;th&gt;Travel Date&lt;/th&gt;&#x000A;  &lt;/tr&gt;&#x000A;&lt;% @itineraries.each do |itinerary| %&gt;&#x000A;  &lt;tr&gt;&#x000A;    &lt;td&gt;&lt;%= @itinerary.location %&gt;&lt;/td&gt;&#x000A;    &lt;td&gt;&lt;%= @itinerary.travel_on %&gt;&lt;/td&gt;&#x000A;  &lt;tr&gt;&#x000A;&lt;% end %&gt;&#x000A;&lt;/table&gt;&#x000A;</code></pre>
          </div>
          <h2>Result</h2>
          
          <pre><code>browser =&gt;&#x000A;  Showing C:/Users/George Mendoza/trips-app/app/views/itineraries/index.html.erb&#x000A;    where line #8 raised:&#x000A;  undefined method `each&#39; for nil:NilClass&#x000A;  Line 8: &lt;% @itineraries.each do |itinerary| %&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4.2: Clean up: itineries/index to set up @itineraries</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def index&#x000A;    @itineraries = Itinerary.all&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 5: Link itineraries to their Show pages</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;h1&gt;Itineraries&lt;/h1&gt;&#x000A;&#x000A;&lt;table&gt;&#x000A;  &lt;tr&gt;&#x000A;    &lt;th&gt;Location&lt;/th&gt;&#x000A;    &lt;th&gt;Travel Date&lt;/th&gt;&#x000A;  &lt;/tr&gt;&#x000A;&lt;% @itineraries.each do |itinerary| %&gt;&#x000A;  &lt;tr&gt;&#x000A;    &lt;td&gt;&lt;%= @itinerary.location %&gt;&lt;/td&gt;&#x000A;    &lt;td&gt;&lt;%= @itinerary.travel_on %&gt;&lt;/td&gt;&#x000A;    &lt;td&gt;&lt;%= link_to &#39;Show&#39;, action: &#39;show&#39;, id: itinerary.id %&gt;&lt;/td&gt;&#x000A;  &lt;tr&gt;&#x000A;&lt;% end %&gt;&#x000A;&lt;/table&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 6: Link itinerary back to Itineraries Index page</h2>
          
          <pre><code># app/views/itineraries/show.html.erb&#x000A;&#x000A;&lt;p&gt;&lt;%= link_to &#39;Back&#39;, action: &#39;index&#39; %&gt;&lt;/p&gt;&#x000A;</code></pre>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Create Itinerary Page</h1>
        </section>
        <section>
          <h2>Exercise 1: Create an Itinerary</h2>
          
          <pre><code>When I go to the list of itineraries&#x000A;Then I should see a link to create a new itinerary&#x000A;When I click the link to create a new itinerary&#x000A;Then I should see a form for creating an itinerary&#x000A;When I enter the itinerary in the form and submit it&#x000A;Then I should see the itinerary I created&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: Create a link to create a new itinerary</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;p&gt;&#x000A;  &lt;%= link_to &#39;New&#39;, action: &#39;new&#39; %&gt;&#x000A;&lt;/p&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I go to the list of itineraries&#x000A;Then I should see a link to create a new itinerary&#x000A;When I click the link to create a new itinerary&#x000A;Then I should see a form for creating an itinerary&#x000A;But instead I see&#x000A;  Unknown action&#x000A;  The action &#39;new&#39; could not be found for ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: Add new action to ItinerariesController</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def new&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/new, application/new with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: Add itineraries/new template</h2>
          
          <pre><code># app/views/itineraries/new.html.erb&#x000A;&lt;h1&gt;New Itinerary&lt;/h1&gt;&#x000A;&lt;%= form_for(Itinerary.new) do |f| %&gt;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.label :location %&gt;&#x000A;    &lt;%= f.text_field :location %&gt;&#x000A;  &lt;/p&gt;&#x000A;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.label :travel_on %&gt;&#x000A;    &lt;%= f.date_select :travel_on %&gt;&#x000A;  &lt;/p&gt;&#x000A;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.submit %&gt;&#x000A;  &lt;/p&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I enter the itinerary in the form and submit it&#x000A;Then I should see the itinerary I created&#x000A;But instead I see&#x000A;  Unknown action: The action &#39;create&#39; could not be found for&#x000A;  ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4: Add Create action</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/create, application/create with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 5: Render the show page</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;    render :show&#x000A;  end&#x000A;end&#x000A;</code></pre>
          <h2>Result</h2>
          
          <pre><code>browser =&gt;&#x000A;  NoMethodError in Itineraries#create&#x000A;  Showing C:/Users/George Mendoza/trips-app/app/views/itineraries/show.html.erb&#x000A;  where line #1 raised:&#x000A;  undefined method `id&#39; for nil:NilClass&#x000A;  Line 1: &lt;h1&gt;Itinerary &lt;%= @itinerary.id %&gt;&lt;/h1&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 6: Create an itinerary, save it, then show it</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;    @itinerary = Itinerary.new&#x000A;    @itinerary.save&#x000A;    render :show&#x000A;  end&#x000A;end&#x000A;</code></pre>
          <h2>Result</h2>
          
          <pre><code>When I enter the itinerary in the form and submit it&#x000A;Then I should see the itinerary I created&#x000A;But instead I see an itinerary with blank location and travel date&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 7: Set the itinerary from the params</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;    @itinerary = Itinerary.new&#x000A;    @itinerary.location = params[:itinerary][:location]&#x000A;    @itinerary.travel_on = params[:itinerary][:travel_on]&#x000A;    @itinerary.save&#x000A;    render :show&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 2: Fix bug: refreshing the itinerary page creates a new itinerary</h2>
          
          <pre><code>Given I have just created an itinerary&#x000A;And I am now viewing the created itinerary&#x000A;When I refresh the page&#x000A;Then I should see the same itinerary&#x000A;But instead a new itinerary is created!&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 8: Redirect instead of render</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;    @itinerary = Itinerary.new&#x000A;    @itinerary.location = params[:itinerary][:location]&#x000A;    @itinerary.travel_on = params[:itinerary][:travel_on]&#x000A;    @itinerary.save&#x000A;    redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 3: Refactor params in create action</h2>
        </section>
        <section>
          <h2>Step 9: Refactor params in create action</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;    @itinerary = Itinerary.new&#x000A;    @itinerary.attributes = params[:itinerary]&#x000A;    @itinerary.save&#x000A;    redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>ActiveModel::ForbiddenAttributesError&#x000A;Extracted source (around line #15):&#x000A;Line 15: @itinerary.attributes = params[:itinerary]&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 10: Specify allowed itinerary params</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def create&#x000A;    @itinerary = Itinerary.new&#x000A;    @itinerary.attributes = params[:itinerary].permit(:location, :travel_on)&#x000A;    @itinerary.save&#x000A;    redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Update Itinerary Page</h1>
        </section>
        <section>
          <h2>Exercise 1: Edit an Itinerary</h2>
          
          <pre><code>Given I have an itinerary&#x000A;When I go to the list of itineraries&#x000A;Then I should see a link to edit the itinerary&#x000A;When I click the link to edit the itinerary&#x000A;Then I should see a form for editing the itinerary&#x000A;When I edit the itinerary in the form and submit it&#x000A;Then I should see that the itinerary has been updated&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: I should see a link to edit the itinerary</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;td&gt;&#x000A;  &lt;%= link_to &#39;Show&#39;, action: &#39;show&#39;, id: itinerary.id %&gt;&#x000A;  &lt;%= link_to &#39;Edit&#39;, action: &#39;edit&#39;, id: itinerary.id %&gt;&#x000A;&lt;/td&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I click the link to edit the itinerary&#x000A;Then I should see a form for editing the itinerary&#x000A;But instead I see&#x000A;  Unknown action&#x000A;  The action &#39;edit&#39; could not be found for ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: Add edit action to ItinerariesController</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def edit&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/edit, application/edit with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: Add itineraries/edit template</h2>
          
          <pre><code># app/views/itineraries/edit.html.erb&#x000A;&lt;h1&gt;Edit Itinerary&lt;/h1&gt;&#x000A;&lt;%= form_for(Itinerary.find(params[:id])) do |f| %&gt;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.label :location %&gt;&#x000A;    &lt;%= f.text_field :location %&gt;&#x000A;  &lt;/p&gt;&#x000A;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.label :travel_on %&gt;&#x000A;    &lt;%= f.date_select :travel_on %&gt;&#x000A;  &lt;/p&gt;&#x000A;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.submit %&gt;&#x000A;  &lt;/p&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I edit the itinerary in the form and submit it&#x000A;Then I should see that the itinerary has been updated&#x000A;But instead I see&#x000A;  Unknown action: The action &#39;update&#39; could not be found for&#x000A;  ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4: Add Update action</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def update&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/update, application/update with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 5: Update the itinerary, save it, then show it</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def update&#x000A;    @itinerary = Itinerary.find(params[:id])&#x000A;    @itinerary.attributes = params[:itinerary].permit(:location, :travel_on)&#x000A;    @itinerary.save&#x000A;    redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 2: Refactor form</h2>
        </section>
        <section>
          <h2>Step 1: Change Itinerary.find(params[:id]) to a @itinerary</h2>
          
          <pre><code># app/views/itineraries/edit.html.erb&#x000A;&lt;%= form_for(@itinerary) do |f| %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I click the link to edit the itinerary&#x000A;Then I should see a form for editing the itinerary&#x000A;But instead I see&#x000A;  Showing C:/Users/George Mendoza/trips-app/app/views/itineraries/edit.html.erb&#x000A;  where line #2 raised:&#x000A;  First argument in form cannot contain nil or be empty&#x000A;  Line 2: &lt;%= form_for(@itinerary) do |f| %&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: Set @itinerary to Itinerary.find(params[:id])</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;def edit&#x000A;  @itinerary = Itinerary.find(params[:id])&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: Move Itinerary.new to itineraries/new</h2>
          
          <pre><code># app/views/itineraries/new.html.erb&#x000A;&lt;%= form_for(@itinerary) do |f| %&gt;&#x000A;&#x000A;# app/controllers/itineraries_controller.rb&#x000A;def new&#x000A;  @itinerary = Itinerary.new&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4: Update edit page: replace form with partial</h2>
          
          <pre><code># app/views/itineraries/edit.html.erb&#x000A;&lt;h1&gt;Edit Itinerary&lt;/h1&gt;&#x000A;&lt;%= render &#39;form&#39; %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>  Missing partial itineraries/form, application/form with {&#x000A;    :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in:&#x000A;    &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;  Extracted source (around line #2):&#x000A;    &lt;%= render &#39;form&#39; %&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 5: Add form partial</h2>
          
          <pre><code># app/views/itineraries/_form.html.erb&#x000A;&lt;%= form_for(@itinerary) do |f| %&gt;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.label :location %&gt;&#x000A;    &lt;%= f.text_field :location %&gt;&#x000A;  &lt;/p&gt;&#x000A;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.label :travel_on %&gt;&#x000A;    &lt;%= f.date_select :travel_on %&gt;&#x000A;  &lt;/p&gt;&#x000A;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.submit %&gt;&#x000A;  &lt;/p&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 6: Render form partial in New page</h2>
          
          <pre><code># app/views/itineraries/new.html.erb&#x000A;&lt;h1&gt;New Itinerary&lt;/h1&gt;&#x000A;&lt;%= render &#39;form&#39; %&gt;&#x000A;</code></pre>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Delete Itinerary Page</h1>
        </section>
        <section>
          <h2>Exercise 1: Delete an Itinerary</h2>
          
          <pre><code>When I view an itinerary&#x000A;Then I should see a button to delete the itinerary&#x000A;When I click the delete button&#x000A;Then I should see that the itinerary has been deleted&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: I should see a button to delete the itinerary</h2>
          
          <pre><code># app/views/itineraries/show.html.erb&#x000A;&lt;%= form_for(@itinerary, method: :delete) do |f| %&gt;&#x000A;  &lt;p&gt;&#x000A;    &lt;%= f.submit, value: &#39;Delete Itinerary&#39; %&gt;&#x000A;  &lt;/p&gt;&#x000A;&lt;% end %&gt;&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I click the delete button&#x000A;Then I should be informed that the itinerary has been deleted&#x000A;But instead I see&#x000A;  Unknown action&#x000A;  The action &#39;destroy&#39; could not be found for ItinerariesController&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: Add destroy action to ItinerariesController</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def destroy&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>browser =&gt;&#x000A;  Template is missing: Missing template itineraries/destroy, application/destroy with&#x000A;  { :locale=&gt;[:en],&#x000A;    :formats=&gt;[:html],&#x000A;    :handlers=&gt;[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}.&#x000A;  Searched in: * &quot;C:/Users/George Mendoza/trips-app/app/views&quot;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: Destroy the itinerary, then show the list of itineraries</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;class ItinerariesController &lt; ApplicationController&#x000A;  def destroy&#x000A;    @itinerary = Itinerary.find(params[:id])&#x000A;    @itinerary.destroy&#x000A;    redirect_to action: &#39;index&#39;&#x000A;  end&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 2: Notify me when the itinerary is deleted</h2>
          
          <pre><code>When I view an itinerary&#x000A;Then I should see a button to delete the itinerary&#x000A;When I click the delete button&#x000A;Then I should see that the itinerary has been deleted&#x000A;And I should be informed that it has been deleted&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: Try adding a notice to the index page</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;strong&gt;Notice: &lt;%= @notice %&gt;&lt;/strong&gt;&#x000A;&#x000A;# app/controllers/itineraries_controller.rb&#x000A;def destroy&#x000A;  @itinerary = Itinerary.find(params[:id])&#x000A;  @itinerary.destroy&#x000A;  @notice = &quot;You have successfully deleted a itinerary&quot;&#x000A;  redirect_to action: &#39;index&#39;&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>When I click the delete button&#x000A;And I should be informed that it has been deleted&#x000A;But instead I am not informed that it has been deleted&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: Change the notice to a flash message</h2>
          
          <pre><code># app/views/itineraries/index.html.erb&#x000A;&lt;strong&gt;Notice: &lt;%= flash[:notice] %&gt;&lt;/strong&gt;&#x000A;&#x000A;# app/controllers/itineraries_controller.rb&#x000A;def destroy&#x000A;  @itinerary = Itinerary.find(params[:id])&#x000A;  @itinerary.destroy&#x000A;  flash[:notice] = &quot;You have successfully deleted a itinerary&quot;&#x000A;  redirect_to action: &#39;index&#39;&#x000A;end&#x000A;</code></pre>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
      <div class='slides'>
        <section>
          <h1>Validate Itinerary</h1>
        </section>
        <section>
          <h2>Exercise 1: Validate an Itinerary</h2>
          
          <pre><code>Given I am creating an itinerary&#x000A;And the itinerary&#39;s location is blank&#x000A;When I try to save the itinerary&#x000A;Then I should see that the itinerary isn&#39;t saved&#x000A;And I should see an error saying the itinerary&#39;s location can&#39;t be blank&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>irb &gt; itinerary = Itinerary.new&#x000A;=&gt; =&gt; #&lt;Itinerary id: nil, location: nil, travel_on: nil&gt;&#x000A;&#x000A;irb &gt; itinerary.save&#x000A;=&gt; true&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 1: Validate presence of location</h2>
          
          <pre><code># app/models/itinerary.rb&#x000A;class Itinerary &lt; ActiveRecord::Base&#x000A;  validates :location, presence: true&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>!!! Need to exit rails console to reload !!!&#x000A;&#x000A;irb &gt; itinerary = Itinerary.new&#x000A;=&gt; =&gt; #&lt;Itinerary id: nil, location: nil, travel_on: nil&gt;&#x000A;&#x000A;irb &gt; itinerary.save&#x000A;=&gt; false&#x000A;&#x000A;irb &gt; itinerary.errors&#x000A;=&gt; #&lt;ActiveModel::Errors:0x41ba8c8&#x000A;  @base=#&lt;Itinerary id: nil, location: nil, travel_on: nil&gt;,&#x000A;  @messages={:location=&gt;[&quot;can&#39;t be blank&quot;]}&gt;&#x000A;&#x000A;irb &gt; itinerary.location = &#39;Baguio&#39;&#x000A;irb &gt; itinerary.save&#x000A;=&gt; true&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 2: Validate new itineraries</h2>
          
          <pre><code>Given I am creating an itinerary&#x000A;When I try to save an invalid itinerary&#x000A;Then I should see an error saying the itinerary&#39;s location can&#39;t be blank&#x000A;But instead I see&#x000A;  ActionController::UrlGenerationError in ItinerariesController#create&#x000A;  No route matches {:action=&gt;&quot;show&quot;, :id=&gt;nil, :controller=&gt;&quot;itineraries&quot;}&#x000A;  Extracted source (around line #18):&#x000A;  redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 2: create action should render the new page if invalid</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;def create&#x000A;  @itinerary = Itinerary.new&#x000A;  @itinerary.attributes = params[:itinerary].permit(:location, :travel_on)&#x000A;  if @itinerary.save&#x000A;    redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;  else&#x000A;    render action: &#39;new&#39;&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>Given I am creating an itinerary&#x000A;When I try to save an invalid itinerary&#x000A;Then I should see an error saying the itinerary&#39;s location can&#39;t be blank&#x000A;But I don&#39;t see any error&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 3: add error messages to form</h2>
          
          <pre><code># app/views/itineraries/_form.html.erb&#x000A;&lt;ul&gt;&#x000A;&lt;% @itinerary.errors.full_messages.each do |full_message| %&gt;&#x000A;  &lt;li&gt;&lt;%= full_message %&gt;&lt;/li&gt;&#x000A;&lt;% end %&gt;&#x000A;&lt;/ul&gt;&#x000A;</code></pre>
        </section>
        <section>
          <h2>Exercise 3: Validate existing itineraries</h2>
          
          <pre><code>Given I am editing an itinerary&#x000A;When I try to save an invalid itinerary&#x000A;Then I should see an error saying the itinerary&#39;s location can&#39;t be blank&#x000A;But instead I see the Show Page of the itinerary&#x000A;</code></pre>
        </section>
        <section>
          <h2>Step 4: update action should render the edit page if invalid</h2>
          
          <pre><code># app/controllers/itineraries_controller.rb&#x000A;def update&#x000A;  @itinerary = Itinerary.find(params[:id])&#x000A;  @itinerary.attributes = params[:itinerary].permit(:location, :travel_on)&#x000A;  if @itinerary.save&#x000A;    redirect_to action: &#39;show&#39;, id: @itinerary.id&#x000A;  else&#x000A;    render action: &#39;edit&#39;&#x000A;  end&#x000A;end&#x000A;</code></pre>
          
          <h3>Result</h3>
          
          <pre><code>Success!!!&#x000A;</code></pre>
        </section>
        <section>
          <p><a href="/presentations">Back to index</a></p>
        </section>
      </div>
    </div>
    <script src='/vendor/reveal.js-2.4.0/lib/js/head.min.js'></script>
    <script src='/vendor/reveal.js-2.4.0/js/reveal.min.js'></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        width: 1366,
        height: 768,
        controls: true,
        progress: true,
        history: true,
        center: true,
      
        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
      
        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: '/vendor/reveal.js-2.4.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '/vendor/reveal.js-2.4.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '/vendor/reveal.js-2.4.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '/vendor/reveal.js-2.4.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '/vendor/reveal.js-2.4.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: '/vendor/reveal.js-2.4.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: '/vendor/reveal.js-2.4.0/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: '/vendor/reveal.js-2.4.0/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
  </body>
</html>
